<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, viewport-fit=cover" />
<title>STEM_PLAY</title>
<style>
  html,body{margin:0;height:100%;background:#0b0b0b;}
  #unity-container{
    position:fixed;left:0;top:0;width:100vw;height:100vh;
    padding:env(safe-area-inset-top) env(safe-area-inset-right)
            env(safe-area-inset-bottom) env(safe-area-inset-left);
  }
  #unity-canvas{width:100%;height:100%;background:#231F20;}
  #ui{
    position:fixed;right:calc(8px + env(safe-area-inset-right));
    top:calc(8px + env(safe-area-inset-top));
    display:flex;gap:8px;z-index:10
  }
  .ui-btn{
    border:none;border-radius:12px;padding:10px 14px;
    font:600 14px system-ui, sans-serif;
    background:#1118; backdrop-filter:blur(6px);
    color:#fff; cursor:pointer
  }
  .ui-btn:active{ transform:scale(.98) }
  @media (hover:none){ .ui-btn{ padding:12px 16px; font-size:16px; } }
</style>
</head>
<body>
  <div id="unity-container">
    <canvas id="unity-canvas" tabindex="0"></canvas>
  </div>

  <div id="ui">
    <button id="fs" class="ui-btn" aria-label="Pantalla completa">⛶</button>
  </div>

  <script>
    const canvas = document.getElementById("unity-canvas");
    const config = {
      dataUrl: "Build/456f38241f2146b6aa0ae404bb6e52cf.data.unityweb",
      frameworkUrl: "Build/41b796130dc21c903d4a9252ae38db79.framework.js.unityweb",
      codeUrl: "Build/eac2a875bc962a77196e3803eebc3eb1.wasm.unityweb",
      streamingAssetsUrl: "StreamingAssets",
      companyName: "StemPlay",
      productName: "STEM_PLAY",
      productVersion: "1.0",
      // Reduce reescalado excesivo en móviles 4K/retina:
      devicePixelRatio: 1,
      matchWebGLToCanvasSize: true
    };
  </script>
  <script src="Build/be8d990f02a68e515e0c10fd39410677.loader.js"></script>
  <script>
    let unityInstance = null;
    createUnityInstance(canvas, config, (p)=>{}).then(u => { unityInstance = u; });

    const fsBtn = document.getElementById("fs");
    const isFS = () => document.fullscreenElement || document.webkitFullscreenElement;

    function enterFS(){
      try{ screen.orientation?.lock?.('landscape'); }catch(e){}
      if (unityInstance && unityInstance.SetFullscreen) {
        // Unity maneja los casos de navegador (user gesture)
        unityInstance.SetFullscreen(1);
      } else {
        (canvas.requestFullscreen?.bind(canvas) ||
         canvas.webkitRequestFullscreen?.bind(canvas) || (()=>{}))();
      }
    }
    function exitFS(){
      (document.exitFullscreen || document.webkitExitFullscreen || (()=>Promise.resolve()))();
    }
    fsBtn.addEventListener("click", ()=>{ isFS() ? exitFS() : enterFS(); });

    // iOS Safari < 16 no soporta Fullscreen API -> oculta botón
    if (!('fullscreenEnabled' in document || 'webkitFullscreenEnabled' in document)) {
      fsBtn.style.display = 'none';
    }
  </script>
</body>
</html>
